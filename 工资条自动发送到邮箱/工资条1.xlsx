webpackJsonp([12],{INW1:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"xlx-dialog-subtitle"},[e("div",{staticClass:"xlx-dialog-subtitle__list"},[e("div",{staticClass:"td-table td-table--hover"},[t._m(0),e("div",{staticClass:"td-table__body-wrapper"},[0===t.searchStatus?e("div",{staticClass:"xlx-dialog-subtitle__empty"},[t._m(1)]):2===t.searchStatus?e("div",{staticClass:"xlx-dialog-subtitle__empty"},[e("div",{staticClass:"xlx-dialog-subtitle__tips"},[e("i",{staticClass:"td-icon-warning"}),e("p",[t._v("无相关字幕，建议换名搜索"),e("br"),t._v("或前往"),e("a",{attrs:{href:"javascript:;"},on:{click:function(s){t.$emit("search-subhd",t.searchText,"no_subtitle_subhd")}}},[t._v("SubHD")]),t._v("查找")])])]):1===t.searchStatus?e("table",{staticClass:"td-table__body"},[t._m(2),e("tbody",t._l(t.subtitleList,function(s,a){return s.scid&&s.scid.length>1?e("tr",{key:a},[e("td",[e("p",{staticClass:"td-table__text"},[e("span",{staticClass:"xlx-dialog-subtitle__name",attrs:{title:t.getName(s)}},[t._v(t._s(t.getName(s)))])])]),e("td",[e("p",{staticClass:"td-table__text"},[e("span",{staticClass:"xlx-dialog-subtitle__lang"},[t._v(t._s(s.language))])])]),e("td",[e("td-rate",{attrs:{value:t.getRate(s),total:5,readonly:""}})],1),0===s.status?e("td",[e("p",{staticClass:"td-table__text center"},[e("a",{staticClass:"xlx-dialog-subtitle__link",attrs:{href:"javascript:;"},on:{click:function(e){t.handleOperation(s,a)}}},[t._v("下载字幕")])])]):1===s.status?e("td",[e("p",{staticClass:"td-table__text center"},[e("a",{staticClass:"xlx-dialog-subtitle__link",attrs:{href:"javascript:;"},on:{click:function(e){t.handleOperation(s,a)}}},[t._v("播放视频")])])]):2===s.status?e("td",[t._m(3,!0)]):3===s.status?e("td",[e("p",{staticClass:"td-table__text center"},[e("a",{staticClass:"xlx-dialog-subtitle__link.is-failed",attrs:{href:"javascript:;"},on:{click:function(e){t.handleOperation(s,a)}}},[t._v("下载失败")])])]):t._e()]):t._e()}))]):t._e()])])]),e("div",{staticClass:"xlx-dialog-subtitle__form"},[e("div",{staticClass:"xlx-dialog-subtitle__left"},[e("td-input",{attrs:{value:t.searchText,placeholder:"请输入关键词"},on:{input:function(s){return t.searchText=s}},nativeOn:{keydown:function(s){if(!("button"in s)&&t._k(s.keyCode,"enter",13,s.key))return null;t.searchByName(),t.reportClick("search")}}}),e("a",{staticClass:"td-button",attrs:{href:"javascript:;"},on:{click:function(s){t.searchByName(),t.reportClick("search")}}},[t._v("搜索")]),t.showReturn?e("a",{staticClass:"td-button td-button--other",attrs:{href:"javascript:;"},on:{click:function(s){t.$emit("return")}}},[t._v("上一步")]):t._e()],1),e("a",{staticClass:"xlx-dialog-subtitle__access",attrs:{href:"javascript:;"},on:{click:function(s){t.$emit("search-subhd",t.searchText,"subhd")}}},[t._v("访问SubHD搜索字幕")])])])};a._withStripped=!0;var i={render:a,staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"td-table__header-wrapper"},[s("table",{staticClass:"td-table__header"},[s("colgroup",[s("col"),s("col",{staticClass:"xlx-dialog-subtitle__column-1"}),s("col",{staticClass:"xlx-dialog-subtitle__column-2"}),s("col",{staticClass:"xlx-dialog-subtitle__column-3"})]),s("tbody",[s("tr",[s("th",[s("p",{staticClass:"td-table__text"},[this._v("字幕名")])]),s("th",[s("p",{staticClass:"td-table__text"},[this._v("语言")])]),s("th",[s("p",{staticClass:"td-table__text center"},[this._v("评价")])]),s("th",[s("p",{staticClass:"td-table__text center"},[this._v("操作")])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"xlx-dialog-subtitle__tips"},[s("i",{staticClass:"td-icon-load"}),s("p",[this._v("正在搜索字幕...")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("colgroup",[s("col"),s("col",{staticClass:"xlx-dialog-subtitle__column-1"}),s("col",{staticClass:"xlx-dialog-subtitle__column-2"}),s("col",{staticClass:"xlx-dialog-subtitle__column-3"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"td-table__text center"},[s("i",{staticClass:"td-icon-load"})])}]};s.a=i},ovXp:function(t,s,e){"use strict";var a=e("mvHQ"),i=e.n(a),l=e("Xxa5"),n=e.n(l),r=e("Dd8w"),c=e.n(r),u=e("exGp"),o=e.n(u),d=e("Cb+C"),h=e("/8Fg");s.a={props:{curTask:{type:Object,required:!0},showReturn:{type:Boolean,default:!0},fileItem:{type:Object,default:function(){}}},data:function(){return{searchStatus:0,subtitleList:[],searchText:"",eventIdOnSubtitleDownloadSuccess:null,eventIdOnSubtitleDownloadFail:null}},computed:{pannel:function(){return this.$store.state.pannel},reportCommonData:function(){var t="",s=this.$sget(this.curTask,"type");return 1===s?t=this.$sget(this.curTask,"url"):2===s&&(t="magnet:?xt=urn:btih:"+this.$sget(this.curTask,"infoId")),{pannel:this.pannel,gcid:this.curTask.gcid,filename:this.curTask.name,taskid:this.curTaskID,is_video:this.curTask.actions&&(this.curTask.actions.includes("downAndPlay")||this.curTask.actions.includes("play"))?1:0,task_type:s,fileurl:t}}},mounted:function(){if(this.fileItem&&""!==this.fileItem.fileName){var t=this.fileItem.fileName.lastIndexOf("."),s="";s=void 0!==t&&-1!==t?this.fileItem.fileName.substring(0,t):this.fileItem.fileName,this.searchText=s.replace(/[`\-=~!@#$%^&()_+[];',.{}]/g," "),this.searchByCid().catch(),this.eventIdOnSubtitleDownloadSuccess=d.a.api.attach("OnSubtitleDownloadSuccess",this.subtitleDownloadSuccessHandler),this.eventIdOnSubtitleDownloadFail=d.a.api.attach("OnSubtitleDownloadFail",this.subtitleDownloadFailHandler)}},destroyed:function(){d.a.api.detach("OnSubtitleDownloadSuccess",this.eventIdOnSubtitleDownloadSuccess),d.a.api.detach("OnSubtitleDownloadFail",this.subtitleDownloadFailHandler)},methods:{getName:function(t){var s=".srt";if(void 0!==t.surl&&t.surl.length>1){var e=t.surl.substring(t.surl.lastIndexOf("."));s=t.sname+e}return""===t.sname?".srt":s},getRate:function(t){if(void 0!==t){if("number"==typeof t.rate)return t.rate;if("string"==typeof t.rate)return Number(t.rate)}return 0},searchByName:function(){var t=o()(n.a.mark(function t(){var s,e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.searchStatus=0,t.next=3,Object(h.b)("SubtitleQuerySubtitleByName",this.searchText,this.curTask.taskID);case 3:if(s=t.sent){e=null;try{e=JSON.parse(s)}catch(t){}e&&(this.subtitleList=e),this.subtitleList.length>1&&(this.searchStatus=1,this.$stat("download_detail","dltab_detail_subtitlessearch_result",c()({},this.reportCommonData,{result:"success"})))}1!==this.searchStatus&&(this.searchStatus=2,this.$stat("download_detail","dltab_detail_subtitlessearch_result",c()({},this.reportCommonData,{result:"fail"})));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),searchByCid:function(){var t=o()(n.a.mark(function t(){var s,e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.b)("SubtitleQuerySubtitleByCid",this.fileItem.cid,this.curTask.taskID);case 2:if(s=t.sent){e=null;try{e=JSON.parse(s)}catch(t){}e&&(this.subtitleList=e),this.subtitleList.length>1&&(this.searchStatus=1,this.$stat("download_detail","dltab_detail_subtitlessearch_result",c()({},this.reportCommonData,{result:"success"})))}if(1===this.searchStatus){t.next=7;break}return t.next=7,this.searchByName();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleOperation:function(){var t=o()(n.a.mark(function t(s,e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==s.status&&3!==s.status){t.next=8;break}return 0===s.status&&this.reportClick("download"),s.status=2,t.next=5,Object(h.b)("SubtitleDownload",i()(s),this.curTask.taskID,this.fileItem.fileName);case 5:s.subtitleTaskId=t.sent,t.next=9;break;case 8:1===s.status&&Object(h.b)("SubtitleOpen",this.curTask.taskID,this.fileItem.fileName).catch();case 9:case"end":return t.stop()}},t,this)}));return function(s,e){return t.apply(this,arguments)}}(),subtitleDownloadSuccessHandler:function(t,s,e){var a=this.subtitleList.filter(function(s){return s.subtitleTaskId===t});a&&a.length>0&&(a[0].status=1,this.$stat("download_detail","dltab_detail_subtitlesdown_result",c()({},this.reportCommonData,{result:"success"})))},subtitleDownloadFailHandler:function(t,s,e){var a=this.subtitleList.filter(function(s){return s.subtitleTaskId===t});a&&a.length>0&&(a[0].status=3,this.$stat("download_detail","dltab_detail_subtitlesdown_result",c()({},this.reportCommonData,{result:"fail"})))},reportClick:function(t){this.$stat("download_detail","dltab_detail_subtitles_tab_click",c()({},this.reportCommonData,{button:t}))}}}},x3JH:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("ovXp"),i=e("INW1"),l=e("VU/8")(a.a,i.a,!1,null,null,null);l.options.__file="pages\\subtitle-search.vue",s.default=l.exports}});                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      